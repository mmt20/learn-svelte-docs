# 04. Link Options & Preloading Routes' Code & Data

Preloading is one of SvelteKit's most powerful performance features. By loading code and data before the user navigates, you can create near-instant page transitions.

---

## ðŸŽ¯ What Is Preloading?

**Preloading** means fetching a route's code and data before the user actually navigates to it. This eliminates loading delays and creates a snappier user experience.

### What Gets Preloaded?

| Resource | Description | When |
| :--- | :--- | :--- |
| **JavaScript Code** | Route components and their dependencies | Based on `preload-code` setting |
| **Load Function Data** | Data from `load` functions | Based on `preload-data` setting |
| **CSS** | Stylesheets for the route | Automatically with code |

---

## ðŸ”— Link Preloading Attributes

SvelteKit provides `data-sveltekit-preload-*` attributes to control preloading behavior.

### `data-sveltekit-preload-data`

Controls when to preload the route's data (run load functions).

```svelte
<!-- Preload data on hover -->
<a href="/blog" data-sveltekit-preload-data="hover">
    Blog
</a>

<!-- Preload data on tap/click (mobile-friendly) -->
<a href="/about" data-sveltekit-preload-data="tap">
    About
</a>

<!-- Preload data immediately when link appears -->
<a href="/dashboard" data-sveltekit-preload-data="viewport">
    Dashboard
</a>

<!-- Don't preload data -->
<a href="/contact" data-sveltekit-preload-data="off">
    Contact
</a>
```

#### Options

| Value | When It Preloads | Best For |
| :--- | :--- | :--- |
| `"hover"` | When user hovers over link | Desktop navigation, frequently accessed pages |
| `"tap"` | When user touches link (before release) | Mobile navigation, touch devices |
| `"viewport"` | When link enters viewport | Critical pages, above-the-fold links |
| `"off"` | Never | External links, rarely used pages |

### `data-sveltekit-preload-code`

Controls when to preload the route's JavaScript code.

```svelte
<!-- Preload code on hover -->
<a href="/products" data-sveltekit-preload-code="hover">
    Products
</a>

<!-- Preload code when link is visible -->
<a href="/pricing" data-sveltekit-preload-code="viewport">
    Pricing
</a>

<!-- Preload code eagerly (immediately) -->
<a href="/home" data-sveltekit-preload-code="eager">
    Home
</a>
```

#### Options

| Value | When It Preloads | Best For |
| :--- | :--- | :--- |
| `"eager"` | Immediately when page loads | Critical routes, likely next pages |
| `"viewport"` | When link enters viewport | Above-the-fold links |
| `"hover"` | When user hovers over link | Desktop navigation |
| `"tap"` | When user touches link | Mobile navigation |
| `"off"` | Never | External links, admin pages |

### Combining Both

```svelte
<!-- Preload both code and data on hover -->
<a 
    href="/blog" 
    data-sveltekit-preload-data="hover"
    data-sveltekit-preload-code="hover"
>
    Blog
</a>

<!-- Preload code eagerly, data on hover -->
<a 
    href="/dashboard" 
    data-sveltekit-preload-code="eager"
    data-sveltekit-preload-data="hover"
>
    Dashboard
</a>
```

---

## ðŸš€ Programmatic Preloading

Use the `preloadData` and `preloadCode` functions to preload routes programmatically.

### `preloadData()`

```svelte
<script>
    import { preloadData } from '$app/navigation';
    
    async function handleMouseEnter() {
        // Preload data for a route
        await preloadData('/blog');
    }
</script>

<button onmouseenter={handleMouseEnter}>
    Hover to preload blog
</button>
```

### `preloadCode()`

```svelte
<script>
    import { preloadCode } from '$app/navigation';
    import { onMount } from 'svelte';
    
    onMount(() => {
        // Preload code for critical routes on page load
        preloadCode('/dashboard');
        preloadCode('/profile');
        preloadCode('/settings');
    });
</script>
```

---

## ðŸŽ¨ Preloading Strategies

### Strategy 1: Eager Preloading for Critical Routes

```svelte
<!-- src/routes/+layout.svelte -->
<script>
    import { preloadCode } from '$app/navigation';
    import { onMount } from 'svelte';
    
    onMount(() => {
        // Preload critical routes immediately
        preloadCode('/');
        preloadCode('/dashboard');
        preloadCode('/profile');
    });
</script>

<nav>
    <a href="/" data-sveltekit-preload-data="hover">Home</a>
    <a href="/dashboard" data-sveltekit-preload-data="hover">Dashboard</a>
    <a href="/profile" data-sveltekit-preload-data="hover">Profile</a>
</nav>
```

### Strategy 2: Viewport-Based Preloading

```svelte
<!-- Preload when links become visible -->
<nav>
    <a href="/section-1" data-sveltekit-preload-code="viewport">
        Section 1
    </a>
    <a href="/section-2" data-sveltekit-preload-code="viewport">
        Section 2
    </a>
</nav>
```

---


---

## ðŸ“Š Summary

| Attribute | Values | Best For |
| :--- | :--- | :--- |
| `data-sveltekit-preload-code` | `eager`, `viewport`, `hover`, `tap`, `off` | JavaScript bundles |
| `data-sveltekit-preload-data` | `viewport`, `hover`, `tap`, `off` | Load function data |

| Function | Purpose | Example |
| :--- | :--- | :--- |
| `preloadCode(path)` | Preload route's JavaScript | `preloadCode('/dashboard')` |
| `preloadData(path)` | Preload route's data | `preloadData('/blog')` |

---

**Next Up**: [Pitfalls and Best Practices](./05.%20Pitfalls%20and%20Best%20Practices.md) â†’
