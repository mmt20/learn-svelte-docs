# 09. SvelteKit Hooks

Welcome to the **SvelteKit Hooks** module! Here youâ€™ll learn how to use SvelteKitâ€™s hook system to run appâ€‘wide logic around every request â€” things like authentication, logging, error handling, and URL rewriting.

> [!NOTE]
> In SvelteKit, **hooks are middleware**, not UI helpers. They are closer to *Next.js middleware / Express middleware* than to **React hooks** like `useState`. For a deeper comparison, check out [Pitfalls and Best Practices](./04.%20Pitfalls%20and%20Best%20Practices.md).

---

## ðŸ“š What You'll Learn

In this module, youâ€™ll discover:

1. **Server Hooks**
   - Intercepting requests with `handle`
   - Managing per-request data using `locals`
   - Modifying server-side `fetch` calls with `handleFetch`
   - Customizing validation errors with `handleValidationError`

2. **Shared Hooks**
   - Handling **unexpected** errors on both client and server with `handleError`
   - Running oneâ€‘time startup logic with `init`

3. **Universal Hooks**
   - Rerouting URLs dynamically with `reroute`
   - Transporting custom types across the server/client boundary with `transport`

4. **Pitfalls and Best Practices**
   - SvelteKit Hooks vs React Hooks comparison (mental model)
   - Security and performance considerations when writing hooks

---

## ðŸ§­ When Youâ€™d Use Hooks

You reach for hooks when something must happen **for many pages or every request**, instead of repeating it in each route:

- **Authentication & authorization** â€“ e.g. read a session cookie once in `handle`, put the user on `locals`, and protect `/admin` routes.
- **Logging & observability** â€“ log incoming requests, performance metrics, or unexpected errors in one place.
- **Error handling** â€“ use `handleError` to catch and sanitize unexpected errors before they reach the UI.
- **URL and data shaping** â€“ rewrite legacy URLs with `reroute`, or send/receive rich domain objects with `transport`.

If itâ€™s **page-specific logic**, it usually belongs in a `load` function or a route file. If itâ€™s **app-wide**, itâ€™s a good candidate for a hook.

---

## ðŸŽ¯ Learning Objectives

By the end of this module, you will:

- âœ… Understand the difference between **Server**, **Shared**, and **Universal** hooks.
- âœ… Be able to intercept and modify request/response lifecycles using `handle` and `event.locals`.
- âœ… Know how to implement custom error handling strategies with `handleError` and `handleValidationError`.
- âœ… Clearly distinguish between **SvelteKit hooks (middleware)** and **React hooks (component state)**.

---

## ðŸ—‚ï¸ Module Structure

| File | Topic | Description |
| :--- | :--- | :--- |
| **01** | [Server Hooks](./01.%20Server%20Hooks.md) | `handle`, `locals`, `handleFetch`, validation, and request interception |
| **02** | [Shared Hooks](./02.%20Shared%20Hooks.md) | Error handling and oneâ€‘time initialization |
| **03** | [Universal Hooks](./03.%20Universal%20Hooks.md) | URL rerouting and custom data transport |
| **04** | [Pitfalls and Best Practices](./04.%20Pitfalls%20and%20Best%20Practices.md) | React comparison, security, and performance tips |

---

## ðŸš€ Prerequisites

Before starting this module, you should be comfortable with:

- Basic SvelteKit routing and fileâ€‘based routes
- The idea of HTTP requests and responses
- `load` functions and server-side data loading (`+page.server.*`, `+layout.server.*`)

---

## ðŸ’¡ Why This Matters

Hooks are the **glue** that holds a complex SvelteKit application together. They allow you to:

- **Secure** your application by checking auth status globally.
- **Optimize** performance by controlling headers and preloading in one place.
- **Harden** your app with robust error handling so failures degrade gracefully instead of crashing the UI.

> [!TIP]
> Think of hooks as your appâ€™s **middleware layer**. They sit between the incoming request and your route code, giving you a central place to enforce rules and share data.

---

**Ready to master SvelteKit Hooks? Letâ€™s dive in! ðŸš€**
